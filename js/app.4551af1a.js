(function(t){function n(n){for(var o,r,a=n[0],c=n[1],u=n[2],l=0,f=[];l<a.length;l++)r=a[l],s[r]&&f.push(s[r][0]),s[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(n);while(f.length)f.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,n=0;n<i.length;n++){for(var e=i[n],o=!0,r=1;r<e.length;r++){var c=e[r];0!==s[c]&&(o=!1)}o&&(i.splice(n--,1),t=a(a.s=e[0]))}return t}var o={},s={app:0},i=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"06091def"}[t]+".js"}function a(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.e=function(t){var n=[],e=s[t];if(0!==e)if(e)n.push(e[2]);else{var o=new Promise(function(n,o){e=s[t]=[n,o]});n.push(e[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=r(t),i=function(n){c.onerror=c.onload=null,clearTimeout(u);var e=s[t];if(0!==e){if(e){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src,r=new Error("Loading chunk "+t+" failed.\n("+o+": "+i+")");r.type=o,r.request=i,e[1](r)}s[t]=void 0}};var u=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(n)},a.m=t,a.c=o,a.d=function(t,n,e){a.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,n){if(1&n&&(t=a(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)a.d(e,o,function(n){return t[n]}.bind(null,o));return e},a.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(n,"a",n),n},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.p="/",a.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var p=u;i.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"56d7":function(t,n,e){"use strict";e.r(n);e("cadf"),e("551c"),e("f751"),e("097d");var o=e("2b0e"),s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("h1",[t._v("手眼异步训练")]),e("div",{attrs:{id:"nav"}},[e("router-link",{attrs:{to:"/"}},[t._v("训练")]),t._v(" |\n    "),e("router-link",{attrs:{to:"/about"}},[t._v("关于")])],1),e("router-view")],1)},i=[],r=(e("7c55"),e("2877")),a={},c=Object(r["a"])(a,s,i,!1,null,null,null),u=c.exports,l=e("8c4f"),p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home"},[t.isDebug?e("button",{on:{click:t.onPause}},[t._v("pause")]):t._e(),t.isDebug?e("button",{on:{click:t.onResume}},[t._v("resume")]):t._e(),t.state===t.BEFORE_START?e("div",[t._v("\n    每分钟"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.spm,expression:"spm"}],domProps:{value:t.spm},on:{input:function(n){n.target.composing||(t.spm=n.target.value)}}}),t._v("小节\n    "),e("button",{on:{click:t.onStart}},[t._v("开始")])]):t._e(),t.isRunning?e("div",t._l(t.sections,function(n,o){return e("span",{staticClass:"section"},[t.playingSecNo>o?[e("span",{staticClass:"no-hint"}),t._l(n,function(n){return e("span",{staticClass:"note"},[e("span",{class:{succ:"SUCCESS"===n.status,fail:"MISSED"===n.status}},[t._v("\n            "+t._s(n.finger)+"\n          ")])])})]:t.playingSecNo==o?[e("span",{staticClass:"hint"},[t._v("手")]),t._l(n,function(n,o){return e("span",{staticClass:"note"},["SUCCESS"===n.status?e("span",{staticClass:"succ"},[t._v(t._s(n.finger))]):t._e(),"NOT_HIT"===n.status?e("span",[t._v(".")]):t._e()])})]:o>t.playingSecNo&&o<=t.playingSecNo+t.coveredSecNum?[e("span",{staticClass:"no-hint"}),t._l(n,function(n){return e("span",{staticClass:"note"},[t._v("\n          x\n        ")])})]:t.playingSecNo+t.coveredSecNum+1==o?[e("span",{staticClass:"hint"},[t._v("眼")]),t._l(n,function(n,o){return e("span",{staticClass:"note looking-ahead"},[t._v("\n          "+t._s(n.finger)+"\n        ")])})]:[e("span",{staticClass:"no-hint"}),t._l(n,function(n){return e("span",{staticClass:"note"},[t._v("\n          "+t._s(n.finger)+"\n        ")])})],t._v("\n      |\n    ")],2)}),0):t._e(),t.state===t.RUNNING||t.state===t.ENDING?e("div",[t._v("\n    正确："+t._s(t.correctNum)+"\n  ")]):t._e(),t.state===t.ENDING?e("div",[e("h2",[t._v("游戏结束！得分"+t._s(t.score))]),e("button",{on:{click:t.onConfirmEnd}},[t._v("好的")])]):t._e()])},f=[],h=1,v=2,m=3,g={BEFORE_START:h,RUNNING:v,ENDING:m},d={name:"home",components:{},timers:{running:{time:3e3,autostart:!1,repeat:!0}},data:function(){return{spm:30,sections:[],playingSecNo:-1,state:g.BEFORE_START,coveredSecNum:1,posInPlayingSec:0,correctNum:0,isDebug:!1}},created:function(){var t=this;window.onkeydown=function(n){t.onPress(n.key)};var n=localStorage["spm"];isNaN(n)||(this.spm=parseInt(n))},mounted:function(){},watch:{spm:function(t,n){var e=t;localStorage["spm"]=e}},computed:{score:function(){for(var t=0,n=0;n<this.sections.length;n++)t+=this.sections[n].length;return Math.floor(this.correctNum/t*100)},isRunning:function(){return this.state===g.RUNNING},RUNNING:function(){return g.RUNNING},BEFORE_START:function(){return g.BEFORE_START},ENDING:function(){return g.ENDING}},methods:{onStart:function(){var t=40,n=2,e=4;this.createSections({sectionNum:t,notesInSection:n,fingerCount:e}),this.playingSecNo=-1-this.coveredSecNum,this.correctNum=0,this.posInPlayingSec=0,this.state=g.RUNNING,this.timers.running.time=1e3/(this.spm/60),this.$timer.start("running")},onPause:function(){this.$timer.stop("running")},onResume:function(){this.$timer.start("running")},onPress:function(t){if(console.log("key=".concat(t)),this.state==g.RUNNING&&this.playingSecNo>=0){var n=this.sections[this.playingSecNo];if(this.posInPlayingSec<n.length){var e=n[this.posInPlayingSec];console.log("expectNote=".concat(e)),e.finger==t&&(this.correctNum++,this.posInPlayingSec++,e.status="SUCCESS")}}},running:function(){if(console.log("Hello world"+new Date),this.playingSecNo>=this.sections.length)this.$timer.stop("running"),this.state=g.ENDING;else{if(this.playingSecNo>=0)for(var t=this.sections[this.playingSecNo],n=this.posInPlayingSec;n<t.length;n++)t[n].status="MISSED";this.playingSecNo++,this.posInPlayingSec=0}},createSections:function(t){var n=t.sectionNum,e=t.notesInSection,o=t.fingerCount;this.sections=[];for(var s=0;s<n;s++){for(var i=[],r=0;r<e;r++){var a=Math.floor(Math.random()*o)+1,c="NOT_HIT";i.push({finger:a,status:c})}this.sections.push(i)}},onConfirmEnd:function(){this.state=g.BEFORE_START}}},N=d,_=(e("cccb"),Object(r["a"])(N,p,f,!1,null,null,null)),S=_.exports;o["a"].use(l["a"]);var y=new l["a"]({routes:[{path:"/",name:"home",component:S},{path:"/about",name:"about",component:function(){return e.e("about").then(e.bind(null,"f820"))}}]}),b=e("2f62");o["a"].use(b["a"]);var E=new b["a"].Store({state:{},mutations:{},actions:{}}),I=e("0c49");o["a"].use(I["a"]),o["a"].config.productionTip=!1,new o["a"]({router:y,store:E,render:function(t){return t(u)}}).$mount("#app")},"5c48":function(t,n,e){},"7c55":function(t,n,e){"use strict";var o=e("5c48"),s=e.n(o);s.a},cccb:function(t,n,e){"use strict";var o=e("d563"),s=e.n(o);s.a},d563:function(t,n,e){}});
//# sourceMappingURL=app.4551af1a.js.map